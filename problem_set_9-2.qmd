---
title: "Problem Set 9"
subtitle: "Due date: 9 December"
format: 
  html:
    self-contained: true
toc: true
editor: visual
execute: 
  echo: true
  warning: false
  message: false
---

Please upload your completed assignment to the ELMs course site (under the assignments menu). Remember to include an annotated script file for all work with R and show your math for all other problems (if applicable, or necessary). Please also upload your completed assignment to the Github repository that you have shared with us. *We should be able to run your script with no errors.*

**Total points: 40**

## Question 1

*Points: 10*

Table 1 below reports the results from two regression models. In Model 1 in Table 1 $Y$ is regressed on $X_1$ and, in Model 2, $Y$ is regressed on both $X_1$ and $X_2$. Why might $X_1$ be statistically significant at conventional levels in Model 1 but statistically insignificant in Model 2? Be as specific as possible.

![](images/ps9.png){fig-align="center"}

Answer:

In Model 1 X1 is statistically significant, meaning its estimated effect on Y is clearly different from zero. But when we move to Model 2, which includes both X1 and X2, X1 is no longer statistically significant. This change happens because X1 and X2 both capture some of the same shifts in Y.

In Model 1, X1 reflects not only its own influence on Y but also part of the variation that X2 would explain if it were included. When X2 is added in Model 2, the model separates their contributions. It estimates the impact of X1 while holding X2 constant.

So, the significance of X1 in the smaller model stems partly from leaving out X2. The expanded model shows that once X2 is taken into account, the effect of X1 on Y cannot be estimated precisely enough to meet the usual thresholds for statistical significance.

## Question 2

*Points: 10*

Using the `censusAggregate` dataset (posted on ELMs), which is survey data aggregated to the state level (1972-2000), estimate a regression with `vote` as the dependent variable and the following independent variables: `nonSouth`, `edr`, and `pcthsg`. Report the results in a professionally formatted table and interpret the regression results.

Also, create a figure to display the predicted values (with confidence intervals) for the effect of `pcthsg` on the turnout rate. Lastly, is it meaningful to interpret the constant term on its own? Why, or why not?

::: callout-note
`vote` is the turnout rate in a state in a given year (i.e., the number of people who voted divided by the number eligible to vote).

`nonSouth` is a dummy variable equal to `0` for Southern states and a `1` for non-Southern states.

`pcthsg` is the percentage of the population in a state that graduated high school.

`edr` is a dummy variable equal to `1` for states that used election-day registration and a `0` for states without election-day registration.
:::

```{r}
library(tidyverse)
library(modelsummary) 
library(broom)
library(ggplot2)

data <- read_csv("censusAggregate-1.csv") 

model <- lm(vote ~ nonSouth + edr + pcthsg, data = data)

modelsummary(
  model,
  statistic = "({std.error})",
  stars = TRUE,
  gof_omit = "IC|Log|Adj|F$",
  title = "Regression of Turnout on nonSouth, states with or without same day registration, and percentage of population that graduated high school"
)

newdat <- tibble(
  pcthsg = seq(
    min(data$pcthsg, na.rm = TRUE),
    max(data$pcthsg, na.rm = TRUE),
    length.out = 100
  ),
  nonSouth = mean(data$nonSouth, na.rm = TRUE),
  edr = mean(data$edr, na.rm = TRUE)
)

preds <- cbind(
  newdat,
  predict(model, newdata = newdat, interval = "confidence")
)

ggplot(preds, aes(x = pcthsg, y = fit)) +
  geom_line(size = 1) +
  geom_ribbon(aes(ymin = lwr, ymax = upr), alpha = 0.2) +
  labs(
    title = "Predicted Turnout Across Percentage by percentage of population that graduated high school",
    x = "Percentage of High School Graduates (pcthsg)",
    y = "Predicted Turnout Rate"
  ) +
  theme_minimal(base_size = 14)
```
Answer:

The regression results indicate that turnout levels are higher in states outside the South and in states that offer election day Registration. States outside the South had a higher turnout (about 5.5 percentage points) on average when compared to Southern states which were lower in their turnout. States that offered election day registration Election-Day Registration had a higher turnout (about 5.8 percentage points) on average when compared to states who did not. Education also plays a role, for every one-point in a stateâ€™s high school graduation rate, turnout rises by about 0.10 points which while relatively small is statistically significant. Overall, the model accounts for approximately 28% of the variation in turnout across states from 1972 to 2000. The predicted-values plot shows a steady upward pattern, indicating that higher educational attainment is linked to slightly higher turnout rates across the observed range of percentage of populations who graduated high school. Lastly, the constant is not meaningful in this example because pcthsg = 0. This means that it does not occur in any real state and is so far removed from the observed data.

## Question 3

*Points: 5*

A linear regression model of the turnout rate in a state (`vote`) estimated by the percentage of the population in a state that graduated high school (`pcthsg`) alone shows this sole independent variable to be less likely to be observed if it had no explanatory power (the null were true) compared to the fuller model estimated in the last question. Why is this the case?

Answer: 

When turnout (vote) is regressed on pcthsg alone, the estimated effect of pcthsg appears more statistically significant than in the fuller model that also includes nonSouth and edr. This happens because, in the simple model, pcthsg is capturing not only its own relationship with turnout but also part of the variation that the other variables explain when they are included.

nonSouth and edr are both related to differences in turnout across states, and they also tend to move together with the level of high school completion. When they are not in the model, pcthsg absorbs some of their explanatory power, making it appear more strongly connected to turnout. Once these additional predictors are added, the model separates their unique contributions. The effect of pcthsg is then estimated while holding nonSouth and edr constant, which removes the extra variation it was picking up in the simple model. 

Thus, pcthsg looks more statistically important in the simple bivariate regression partly because the model omits other relevant predictors. The fuller model provides a clearer picture, showing that once the other factors are taken into account, the independent contribution of high-school graduation rates to turnout is more modest and less precisely estimated.

## Question 4

*Points: 15*

Using one of the other data sets available in the `poliscidata` package pick one dependent variable and two or more independent variables. Run a regression of the dependent variable on the independent variables. In your answer, describe why you picked the variables you did, produce a professionally formatted results table, and describe your statistical and substantive findings.

```{r}
model2 <- lm(vote ~ year + reg, data = data)
modelsummary(model2, 
  statistic = "({std.error})",        
  stars = TRUE,                       
  gof_omit = "IC|Log|Adj|F$|RMSE",    
  title = "Regression of Turnout on Year and Registration Rate")

library(tidyverse)
library(ggplot2)

newdat_reg <- tibble(
  reg = seq(min(data$reg, na.rm = TRUE),
            max(data$reg, na.rm = TRUE),
            length.out = 100),
  year = mean(data$year, na.rm = TRUE)
)

pred_reg <- cbind(
  newdat_reg,
  predict(model2, newdat_reg, interval = "confidence")
)

ggplot(pred_reg, aes(x = reg, y = fit)) +
  geom_line(size = 1.2) +
  geom_ribbon(aes(ymin = lwr, ymax = upr), alpha = 0.2) +
  labs(
    title = "Predicted Turnout Across Levels of Registration Strictness",
    x = "Registration Requirement (reg)",
    y = "Predicted Turnout"
  ) +
  theme_minimal(base_size = 14)



```

Answer:

The regression model shows that voter turnout goes down on average slightly over time when compared to earlier years, even after accounting for state registration rules. The coefficient for year is negative and statistically significant, indicating that turnout goes down by roughly 0.046 percentage points per year on average. In contrast, states with higher values on the registration measure show higher turnout on average when compared to states that have a lower registration measure, with an increase of nearly 0.9 percentage points for each unit increase. The intercept is not substantively meaningful, as it represents the predicted turnout when year = 0, which falls far outside the time period of the dataset. I chose these variables because I was interested in understanding if there would be a noticeable pattern as time would go on, but also because there might be specific years that yield specific results which could require qualitative work and further research. Registration was also used because it has been a long standing interest of mine to see if registration rates hold any noticeable patterns when held in conversation with turnout. 
